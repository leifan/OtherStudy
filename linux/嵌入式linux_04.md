# 嵌入式Linux-04 移植U-Boot

## Bootloader简介

### 4.1 Bootloader的引入

系统上电之后，需要一段程序来进行初始化；关闭WATCHDOG、改变系统时钟、初始化存储控制器、将更多的代码复制到内存中等。如果它能将操作系统内涵复制到内存中运行，无论本地还是远端就称这段程序为Bootloader.

简单的说，Bootloader就是在系统上电时开始执行，初始化应急设备、准备好软件环境，最后调用操作系统的内核。

Bootloader的实现非常依赖具体硬件，在嵌入式系统中硬件配置千差万别，即使是相同的CPU,它的外设也可能不同。所以一个Bootloader不可能支持所有CPU、所有的电路板。
即使是支持CPU架构比较多的U-Boot也需要移植使用。

### 4.2 Bootloader的启动方式

CPU上电后，会从某个地址开始执行。比如MIPS结构的CPU会从0xBFC00000取第一条指令，而ARM结构的CPU则从地址0x00000000开始。嵌入式开发板中，需要把存储器件ROM或FLASH等映射到这个地址，Bootloader就存放在这个地址开始处，这样一上电就可以执行。

在开发时，通常需要使用各种命令操作Bootloader,一般通过串口来连接PC和开发板，可以在串口上输入各种命令、观察运行结果等。只是针对开发人员才有意义，用户使用产品时不用接串口来控制Bootloader.Bootloader分为两种操作模式：

（1）启动加载模式
上电后Bottloader从板子上得某个固态存储设备上将操作系统加载到RAM中运行，整个过程并没有用户的介入。产品发布时，Bootloader工作在这种模式下。

（2）下载模式
在这种模式下，开发人员可以使用各种命令，通过串口连接或网络连接等通信手段从主机下载文件（比如内核映象、文件系统映像），将它们直接放在内存运行或是烧入Flash类固态存储设备中。

## 4.2 Bootloader启动过程

### 4.2.1 概述

### 4.2.2 Bootloader的两个阶段

### 4.2.3 Bootloader与内核的交互


## 4.3 常用Bootloader介绍


## 4.4 U-Boot分析与移植


